  534  tar xf ../sources/binutils-2.24.tar.bz2 
  535  cd binutils-2.24/
  536  mkdir -v ../binutils-build
  537  cd ../binutils-build
  538  ../binutils-2.24/configure         --prefix=/tools                --with-sysroot=$LFS            --with-lib-path=/tools/lib     --target=$LFS_TGT              --disable-nls                  --disable-werror
  539  make -j4
  540  case $(uname -m) in   x86_64) mkdir -v /tools/lib && ln -sv lib /tools/lib64 ;; esac
  541  make install
  542  cd ..
  543  tar xf ../sources/gcc-4.8.2.tar.bz2 
  544  cd gcc-4.8.2/
  545  tar xf ../../sources/mpfr-3.1.2.tar.xz
  546  mv -v mpfr-3.1.2 mpfr
  547  tar xf ../../sources/gmp-5.1.3.tar.xz
  548  mv -v gmp-5.1.3 gmp
  549  tar xf ../../sources/mpc-1.0.2.tar.gz
  550  mv -v mpc-1.0.2 mpc
  551  for file in  $(find gcc/config -name linux64.h -o -name linux.h -o -name sysv4.h); do   cp -uv $file{,.orig};   sed -e 's@/lib\(64\)\?\(32\)\?/ld@/tools&@g'       -e 's@/usr@/tools@g' $file.orig > $file;   echo '
#undef STANDARD_STARTFILE_PREFIX_1
#undef STANDARD_STARTFILE_PREFIX_2
#define STANDARD_STARTFILE_PREFIX_1 "/tools/lib/"
#define STANDARD_STARTFILE_PREFIX_2 ""' >> $file;   touch $file.orig; done
  552  sed -i '/k prot/agcc_cv_libc_provides_ssp=yes' gcc/configure
  553  mkdir -v ../gcc-build
  554  cd ../gcc-build
  555  ../gcc-4.8.2/configure                                   --target=$LFS_TGT                                    --prefix=/tools                                      --with-sysroot=$LFS                                  --with-newlib                                        --without-headers                                    --with-local-prefix=/tools                           --with-native-system-header-dir=/tools/include       --disable-nls                                        --disable-shared                                     --disable-multilib                                   --disable-decimal-float                              --disable-threads                                    --disable-libatomic                                  --disable-libgomp                                    --disable-libitm                                     --disable-libmudflap                                 --disable-libquadmath                                --disable-libsanitizer                               --disable-libssp                                     --disable-libstdc++-v3                               --enable-languages=c,c++                             --with-mpfr-include=$(pwd)/../gcc-4.8.2/mpfr/src     --with-mpfr-lib=$(pwd)/mpfr/src/.libs
  556  make -j4
  557  make install
  558  ln -sv libgcc.a `$LFS_TGT-gcc -print-libgcc-file-name | sed 's/libgcc/&_eh/'`
  559  cd ..
  560  tar xf ../sources/linux-3.13.3.tar.xz 
  561  cd linux-3.13.3/
  562  make mrproper
  563  make headers_check
  564  make INSTALL_HDR_PATH=dest headers_install
  565  cp -rv dest/include/* /tools/include
  566  cd ..
  567  tar xf ../sources/glibc-2.19.tar.xz 
  568  cd glibc-2.19/
  569  if [ ! -r /usr/include/rpc/types.h ]; then   su -c 'mkdir -pv /usr/include/rpc';   su -c 'cp -v sunrpc/rpc/*.h /usr/include/rpc'; fi
  570  mkdir -v ../glibc-build
  571  cd ../glibc-build
  572  ../glibc-2.19/configure                                   --prefix=/tools                                     --host=$LFS_TGT                                     --build=$(../glibc-2.19/scripts/config.guess)       --disable-profile                                   --enable-kernel=2.6.32                              --with-headers=/tools/include                       libc_cv_forced_unwind=yes                           libc_cv_ctors_header=yes                            libc_cv_c_cleanup=yes
  573  make -j4
  574  make install
  575  echo 'main(){}' > dummy.c
  576  $LFS_TGT-gcc dummy.c
  577  readelf -l a.out | grep ': /tools'
  578  rm -v dummy.c a.out
  579  cd ..
  580  rm -fr binutils-*
  581  tar xf ../sources/binutils-2.24.tar.bz2 
  582  cd binutils-2.24/
  583  mkdir -v ../binutils-build
  584  cd ../binutils-build
  585  CC=$LFS_TGT-gcc                AR=$LFS_TGT-ar                 RANLIB=$LFS_TGT-ranlib         ../binutils-2.24/configure         --prefix=/tools                --disable-nls                  --with-lib-path=/tools/lib     --with-sysroot
  586  make -j4
  587  make install
  588  make -C ld clean
  589  make -C ld LIB_PATH=/usr/lib:/lib
  590  cp -v ld/ld-new /tools/bin
  591  cd ..
  592  rm -fr gcc-*
  593  tar xf ../sources/gcc-4.8.2.tar.bz2 
  594  cd gcc-4.8.2/
  595  cat gcc/limitx.h gcc/glimits.h gcc/limity.h >   `dirname $($LFS_TGT-gcc -print-libgcc-file-name)`/include-fixed/limits.h
  596  case `uname -m` in   i?86) sed -i 's/^T_CFLAGS =$/& -fomit-frame-pointer/' gcc/Makefile.in ;; esac
  597  for file in  $(find gcc/config -name linux64.h -o -name linux.h -o -name sysv4.h); do   cp -uv $file{,.orig};   sed -e 's@/lib\(64\)\?\(32\)\?/ld@/tools&@g'       -e 's@/usr@/tools@g' $file.orig > $file;   echo '
#undef STANDARD_STARTFILE_PREFIX_1
#undef STANDARD_STARTFILE_PREFIX_2
#define STANDARD_STARTFILE_PREFIX_1 "/tools/lib/"
#define STANDARD_STARTFILE_PREFIX_2 ""' >> $file;   touch $file.orig; done
  598  tar xf ../../sources/mpfr-3.1.2.tar.xz
  599  mv -v mpfr-3.1.2 mpfr
  600  tar xf ../../sources/gmp-5.1.3.tar.xz
  601  mv -v gmp-5.1.3 gmp
  602  tar xf ../../sources/mpc-1.0.2.tar.gz
  603  mv -v mpc-1.0.2 mpc
  604  mkdir -v ../gcc-build
  605  cd ../gcc-build
  606  CC=$LFS_TGT-gcc                                      CXX=$LFS_TGT-g++                                     AR=$LFS_TGT-ar                                       RANLIB=$LFS_TGT-ranlib                               ../gcc-4.8.2/configure                                   --prefix=/tools                                      --with-local-prefix=/tools                           --with-native-system-header-dir=/tools/include       --enable-clocale=gnu                                 --enable-shared                                      --enable-threads=posix                               --enable-__cxa_atexit                                --enable-languages=c,c++                             --disable-libstdcxx-pch                              --disable-multilib                                   --disable-bootstrap                                  --disable-libgomp                                    --with-mpfr-include=$(pwd)/../gcc-4.8.2/mpfr/src     --with-mpfr-lib=$(pwd)/mpfr/src/.libs
  607  history > ~/lfs_history.log
